
当 Kubernetes 出现问题时，遵循循序渐进的方法会很有帮助。与其猜测，不如使用 Kubernetes 内置的工具来找出问题所在。

1. kubectl describe

    `kubectl describe` 命令可以全面分析 Pod、节点或其他资源的运行情况。它会显示当前状态、任何错误消息以及相关事件。这应该是您获取问题线索的第一站。

2. 检查事件和日志

    事件会告诉你 Kubernetes 一直在尝试做什么，例如调度 Pod 或拉取镜像。日志会显示你的应用或容器的实际操作。使用 `kubectl get events` 可以查看全局，使用 `kubectl logs <pod-name>` 可以查看容器内部情况。

3. 使用 Dry Run 验证 YAML

    YAML 文件中的小错误或格式错误可能会导致大问题。在应用配置之前，请使用 `kubectl apply –dry-run=client -f <file>.yaml` 检查配置。这有助于尽早发现错误，而无需更改集群中的任何内容。

4. 监控资源使用情况

    使用 `kubectl top` 或指标仪表板等工具检查 Pod 的 CPU 和内存使用情况。如果 Pod 资源不足（或请求过多），它们可能会崩溃、卡住或被系统终止。

5. 使用探测和健康检查

    存活和就绪探测可帮助 Kubernetes 了解您的应用何时处于健康状态并准备好处理流量。如果缺少这些探测或设置不正确，Pod 可能会频繁重启或在就绪之前接收流量。添加适当的健康检查可以让您的应用更加稳定。


## 参考
- [Kubernetes 部署十大错误：原因、修复方法及技巧](https://mp.weixin.qq.com/s/vhTpLR9ORjmdwbqHDuh6Sw?poc_token=HNTKKmmjJRyRuDGTtqunpdBHyiTSyfDuWQ3z5O92)
